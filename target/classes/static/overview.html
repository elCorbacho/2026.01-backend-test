<!DOCTYPE html>
<html lang="es" data-bs-theme="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cómo funciona la API · Álbumes y Láminas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <style>
        body {
            font-family: "Inter", system-ui, -apple-system, sans-serif;
            background: radial-gradient(circle at 20% 20%, rgba(34,197,94,.08), transparent 32%),
                        radial-gradient(circle at 80% 0%,  rgba(245,158,11,.10), transparent 38%),
                        #0f172a;
        }
        .card {
            background: #111827;
            border-color: #1f2937;
            border-radius: .875rem;
        }
        .list-item {
            background: rgba(255,255,255,.03);
            border: 1px solid #1f2937;
            border-radius: .625rem;
            padding: .75rem 1rem;
        }
        .hero-badge {
            display: inline-block;
            padding: .3rem .75rem;
            border-radius: 999px;
            background: rgba(34,197,94,.14);
            color: #22c55e;
            border: 1px solid rgba(34,197,94,.3);
            font-size: .78rem;
            font-weight: 700;
        }
        .pill {
            border: 1px solid #1f2937;
            background: rgba(255,255,255,.04);
            border-radius: 999px;
            padding: .4rem .875rem;
            font-weight: 600;
            font-size: .85rem;
        }
        pre {
            background: rgba(255,255,255,.03);
            border: 1px solid #1f2937;
            border-radius: .625rem;
            padding: .875rem;
            overflow-x: auto;
            font-size: .82rem;
            color: #e2e8f0;
        }
        code {
            background: rgba(255,255,255,.07);
            padding: .1rem .35rem;
            border-radius: .35rem;
            border: 1px solid #1f2937;
            font-size: .85em;
        }
        a { color: #22c55e; font-weight: 600; }
        a:hover { color: #4ade80; }
        .text-accent { color: #f59e0b; }
        .text-primary-light { color: #22c55e !important; }
    </style>
</head>
<body>

<div class="container py-4 py-md-5" style="max-width: 1080px;">

    <!-- ── HERO ── -->
    <div class="mb-4">
        <span class="hero-badge mb-3 d-inline-block">Vista rápida</span>
        <h1 class="fw-bold mb-2" style="font-size: clamp(1.75rem,4vw,2.25rem); letter-spacing: -.02em;">
            Cómo funciona la API Álbumes y Láminas
        </h1>
        <p class="text-secondary mb-4">Backend Spring Boot 3.5.9 (Java 21) con controladores finos, servicios de dominio y DTOs validados.</p>
        <div class="d-flex flex-wrap gap-2 mb-2">
            <span class="pill"><i class="bi bi-layers me-1 text-primary-light"></i>Arquitectura en capas</span>
            <span class="pill"><i class="bi bi-arrow-left-right me-1 text-primary-light"></i>DTOs + Mappers</span>
            <span class="pill"><i class="bi bi-trash3 me-1 text-primary-light"></i>Soft delete &amp; Auditoría</span>
            <span class="pill"><i class="bi bi-check2-all me-1 text-primary-light"></i>ApiResponseDTO uniforme</span>
        </div>
        <div class="mt-3">
            <a class="btn btn-success btn-sm fw-semibold me-2" href="/">
                <i class="bi bi-house me-1"></i>Inicio
            </a>
            <a class="btn btn-outline-secondary btn-sm fw-semibold me-2" href="/swagger-ui.html">
                <i class="bi bi-journal-code me-1"></i>Swagger UI
            </a>
            <a class="btn btn-outline-secondary btn-sm fw-semibold" href="/actuator/health">
                <i class="bi bi-heart-pulse me-1"></i>Health
            </a>
        </div>
    </div>

    <!-- ── FILA 1: Cómo usar + Arquitectura + Contratos ── -->
    <div class="row g-3 mb-3">
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="fw-semibold mb-3"><i class="bi bi-play-circle-fill text-success me-2"></i>Cómo usarla</h5>
                    <ol class="text-secondary ps-3 mb-0" style="line-height:2; font-size:.88rem;">
                        <li>Inicia la app y abre <a href="/swagger-ui.html">Swagger UI</a>.</li>
                        <li>Usa <code>/api/albums</code> para crear y listar álbumes.</li>
                        <li>Agrega láminas con <code>/api/laminas</code> o carga masiva en <code>/api/laminas/masivo</code>.</li>
                        <li>Consulta estado en <code>/api/albums/{albumId}/catalogo/estado</code>.</li>
                        <li>Monitorea salud en <a href="/actuator/health">/actuator/health</a>.</li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="fw-semibold mb-3"><i class="bi bi-diagram-3-fill text-warning me-2"></i>Arquitectura</h5>
                    <div class="d-grid gap-2">
                        <div class="list-item small"><strong class="text-light">Controladores API</strong><span class="text-secondary ms-1">→ orquestan y devuelven ApiResponseDTO.</span></div>
                        <div class="list-item small"><strong class="text-light">Servicios</strong><span class="text-secondary ms-1">→ reglas de dominio, validaciones y lógica.</span></div>
                        <div class="list-item small"><strong class="text-light">Repositorios</strong><span class="text-secondary ms-1">→ Spring Data JPA con filtros <code>active=true</code>.</span></div>
                        <div class="list-item small"><strong class="text-light">DTOs + Mappers</strong><span class="text-secondary ms-1">→ E/S tipada; nada de entidades en respuestas.</span></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="fw-semibold mb-3"><i class="bi bi-braces-asterisk text-info me-2"></i>Contratos de respuesta</h5>
                    <p class="text-secondary small mb-2">Todas las respuestas usan <code>ApiResponseDTO</code>:</p>
                    <pre class="mb-2">{
  "success": true,
  "message": "OK",
  "data": { ... },
  "timestamp": "..."
}</pre>
                    <small class="text-secondary">Errores manejados por <code>GlobalExceptionHandler</code> con mensajes consistentes.</small>
                </div>
            </div>
        </div>
    </div>

    <!-- ── FILA 2: Endpoints + Reglas + Recursos ── -->
    <div class="row g-3 mb-3">
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="fw-semibold mb-3"><i class="bi bi-lightning-charge-fill text-warning me-2"></i>Endpoints clave</h5>
                    <div class="d-grid gap-2">
                        <div class="list-item small">
                            <span class="fw-semibold text-light">Álbumes</span><br>
                            <span class="text-secondary"><code>GET/POST /api/albums</code></span><br>
                            <span class="text-secondary"><code>GET/PUT/DELETE /api/albums/{id}</code></span>
                        </div>
                        <div class="list-item small">
                            <span class="fw-semibold text-light">Láminas</span><br>
                            <span class="text-secondary"><code>POST /api/laminas</code>, <code>/masivo</code></span><br>
                            <span class="text-secondary"><code>GET /api/laminas/album/{albumId}</code></span>
                        </div>
                        <div class="list-item small">
                            <span class="fw-semibold text-light">Catálogo &amp; Estado</span><br>
                            <span class="text-secondary"><code>POST/GET /api/albums/{albumId}/catalogo</code></span><br>
                            <span class="text-secondary"><code>GET .../catalogo/estado</code></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="fw-semibold mb-3"><i class="bi bi-shield-check-fill text-success me-2"></i>Reglas y patrones</h5>
                    <div class="d-grid gap-2">
                        <div class="list-item small text-secondary"><i class="bi bi-check-circle-fill text-success me-2"></i>Validación con Jakarta en DTOs de entrada.</div>
                        <div class="list-item small text-secondary"><i class="bi bi-trash3-fill text-warning me-2"></i>Soft delete: flag <code>active</code> en lugar de borrado físico.</div>
                        <div class="list-item small text-secondary"><i class="bi bi-clock-fill text-info me-2"></i>Auditoría automática: <code>createdAt</code> y <code>updatedAt</code>.</div>
                        <div class="list-item small text-secondary"><i class="bi bi-exclamation-triangle-fill text-danger me-2"></i>Excepciones de dominio tipadas y centralizadas.</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="fw-semibold mb-3"><i class="bi bi-collection-fill text-primary-light me-2"></i>Recursos rápidos</h5>
                    <div class="d-grid gap-2">
                        <a href="/swagger-ui.html" class="list-item text-decoration-none d-flex align-items-center gap-2">
                            <i class="bi bi-journal-code fs-5 text-success"></i>
                            <div>
                                <div class="fw-semibold text-light">Swagger UI</div>
                                <small class="text-secondary">Interfaz interactiva de la API</small>
                            </div>
                        </a>
                        <a href="/v3/api-docs" class="list-item text-decoration-none d-flex align-items-center gap-2">
                            <i class="bi bi-braces fs-5 text-warning"></i>
                            <div>
                                <div class="fw-semibold text-light">OpenAPI JSON</div>
                                <small class="text-secondary">Especificación descargable</small>
                            </div>
                        </a>
                        <a href="/actuator/health" class="list-item text-decoration-none d-flex align-items-center gap-2">
                            <i class="bi bi-heart-pulse fs-5 text-danger"></i>
                            <div>
                                <div class="fw-semibold text-light">/actuator/health</div>
                                <small class="text-secondary">Estado del servicio</small>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ── FLUJO MÍNIMO ── -->
    <div class="card border-success border-opacity-25">
        <div class="card-body px-4 py-3">
            <h6 class="fw-semibold mb-2 text-primary-light"><i class="bi bi-signpost-2-fill me-2"></i>Flujo mínimo</h6>
            <div class="d-flex flex-wrap align-items-center gap-2 text-secondary" style="font-size:.88rem;">
                <span class="badge bg-success bg-opacity-25 text-success fw-semibold px-2">1</span> Crea un álbum
                <i class="bi bi-arrow-right text-muted"></i>
                <span class="badge bg-success bg-opacity-25 text-success fw-semibold px-2">2</span> Genera catálogo maestro
                <i class="bi bi-arrow-right text-muted"></i>
                <span class="badge bg-success bg-opacity-25 text-success fw-semibold px-2">3</span> Agrega láminas (individual o masivo)
                <i class="bi bi-arrow-right text-muted"></i>
                <span class="badge bg-success bg-opacity-25 text-success fw-semibold px-2">4</span> Consulta estado y estadísticas
            </div>
        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>