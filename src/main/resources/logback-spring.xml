<?xml version="1.0" encoding="UTF-8"?>
<configuration scan="true" scanPeriod="30 seconds">

    <!--
      Logging format goals:
      - No fragile unicode symbols in console output
      - Clear and stable prefixes: APP / HTTP / SQL / SYS
      - Readable in PowerShell/CMD terminals
    -->

    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} %-5level | [%15.15t] [SYS ] %-40.40logger{39} - %msg%n%ex</pattern>
            <charset>UTF-8</charset>
        </encoder>
    </appender>

    <appender name="APP_CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} %-5level | [%15.15t] [APP ] %-40.40logger{39} - %msg%n%ex</pattern>
            <charset>UTF-8</charset>
        </encoder>
    </appender>

    <appender name="HTTP_CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} %-5level | [%15.15t] [HTTP] %msg%n</pattern>
            <charset>UTF-8</charset>
        </encoder>
    </appender>

    <appender name="SQL_CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} %-5level | [%15.15t] [SQL ] %msg%n</pattern>
            <charset>UTF-8</charset>
        </encoder>
    </appender>

    <!-- App logs -->
    <logger name="ipss.web2.examen" level="DEBUG" additivity="false">
        <appender-ref ref="APP_CONSOLE"/>
    </logger>

    <!-- SQL logs -->
    <logger name="org.hibernate.SQL" level="DEBUG" additivity="false">
        <appender-ref ref="SQL_CONSOLE"/>
    </logger>

    <!-- SQL bind parameter logs -->
    <logger name="org.hibernate.orm.jdbc.bind" level="TRACE" additivity="false">
        <appender-ref ref="SQL_CONSOLE"/>
    </logger>

    <!-- HTTP request logging -->
    <logger name="org.springframework.web.filter.CommonsRequestLoggingFilter" level="DEBUG" additivity="false">
        <appender-ref ref="HTTP_CONSOLE"/>
    </logger>

    <!-- Reduce framework noise -->
    <logger name="org.springframework.boot.autoconfigure" level="WARN"/>
    <logger name="org.springframework.boot.context" level="WARN"/>
    <logger name="org.hibernate.dialect" level="WARN"/>
    <logger name="org.hibernate.engine.transaction" level="WARN"/>
    <logger name="com.zaxxer.hikari" level="WARN"/>
    <logger name="org.springframework.orm.jpa" level="WARN"/>
    <logger name="com.h2database" level="WARN"/>

    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
    </root>

</configuration>
