<!DOCTYPE html>
<html lang="es-CL">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Vista DB Detallada</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <style>
        body { background: #0b1221; color: #e2e8f0; }
        .card { background: #111b2e; border: 1px solid #23324f; }
        .badge-db { background: #1d4ed8; }
        code { color: #93c5fd; }
        .table { --bs-table-bg: transparent; --bs-table-color: #e2e8f0; }
        .table thead th { color: #bfdbfe; }
        .muted { color: #94a3b8; }
    </style>
</head>
<body>
<main class="container py-4 py-md-5">
    <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
        <div>
            <h1 class="h3 mb-1">Estructura detallada de base de datos</h1>
            <p class="muted mb-0">Vista complementaria a <code>index</code> con tablas, columnas, relaciones y constraints.</p>
        </div>
        <div class="d-flex gap-2">
            <a class="btn btn-outline-light btn-sm" href="/">Volver al inicio</a>
            <a class="btn btn-primary btn-sm" href="/swagger-ui.html">Swagger</a>
        </div>
    </div>

    <section class="card p-3 p-md-4 mb-4">
        <h2 class="h5">Relaciones principales</h2>
        <ul class="mb-0">
            <li><code>album (1)</code> ⟶ <code>lamina (N)</code> por <code>lamina.album_id</code> (FK).</li>
            <li><code>album (1)</code> ⟶ <code>lamina_catalogo (N)</code> por <code>lamina_catalogo.album_id</code> (FK).</li>
            <li><code>lamina_catalogo</code> aplica <code>UNIQUE(album_id, nombre)</code>.</li>
        </ul>
    </section>

    <section class="card p-3 p-md-4 mb-4">
        <h2 class="h5">Tabla <code>album</code></h2>
        <div class="table-responsive">
            <table class="table table-sm align-middle">
                <thead><tr><th>Columna</th><th>Tipo</th><th>Regla</th></tr></thead>
                <tbody>
                <tr><td><code>id</code></td><td>BIGINT</td><td><span class="badge badge-db">PK</span> AUTO_INCREMENT</td></tr>
                <tr><td><code>nombre</code></td><td>VARCHAR</td><td>NOT NULL</td></tr>
                <tr><td><code>year</code></td><td>INT</td><td>NOT NULL</td></tr>
                <tr><td><code>descripcion</code></td><td>VARCHAR(500)</td><td>Opcional</td></tr>
                <tr><td><code>is_active</code></td><td>BOOLEAN</td><td>Soft delete</td></tr>
                <tr><td><code>created_at</code>, <code>updated_at</code></td><td>DATETIME</td><td>Auditoría JPA</td></tr>
                </tbody>
            </table>
        </div>
    </section>

    <section class="card p-3 p-md-4 mb-4">
        <h2 class="h5">Tabla <code>lamina</code></h2>
        <div class="table-responsive">
            <table class="table table-sm align-middle">
                <thead><tr><th>Columna</th><th>Tipo</th><th>Regla</th></tr></thead>
                <tbody>
                <tr><td><code>id</code></td><td>BIGINT</td><td><span class="badge badge-db">PK</span> AUTO_INCREMENT</td></tr>
                <tr><td><code>album_id</code></td><td>BIGINT</td><td><span class="badge badge-db">FK</span> referencia <code>album.id</code></td></tr>
                <tr><td><code>nombre</code></td><td>VARCHAR</td><td>NOT NULL</td></tr>
                <tr><td><code>imagen</code></td><td>VARCHAR</td><td>Opcional</td></tr>
                <tr><td><code>fecha_lanzamiento</code></td><td>DATE</td><td>NOT NULL</td></tr>
                <tr><td><code>tipo_lamina</code></td><td>VARCHAR</td><td>NOT NULL</td></tr>
                <tr><td><code>is_active</code></td><td>BOOLEAN</td><td>Soft delete</td></tr>
                <tr><td><code>created_at</code>, <code>updated_at</code></td><td>DATETIME</td><td>Auditoría JPA</td></tr>
                </tbody>
            </table>
        </div>
    </section>

    <section class="card p-3 p-md-4">
        <h2 class="h5">Tabla <code>lamina_catalogo</code></h2>
        <div class="table-responsive">
            <table class="table table-sm align-middle">
                <thead><tr><th>Columna</th><th>Tipo</th><th>Regla</th></tr></thead>
                <tbody>
                <tr><td><code>id</code></td><td>BIGINT</td><td><span class="badge badge-db">PK</span> AUTO_INCREMENT</td></tr>
                <tr><td><code>album_id</code></td><td>BIGINT</td><td><span class="badge badge-db">FK</span> referencia <code>album.id</code></td></tr>
                <tr><td><code>nombre</code></td><td>VARCHAR</td><td>NOT NULL + <span class="badge bg-warning text-dark">UNIQUE(album_id, nombre)</span></td></tr>
                <tr><td><code>imagen</code></td><td>VARCHAR</td><td>Opcional</td></tr>
                <tr><td><code>fecha_lanzamiento</code></td><td>DATE</td><td>NOT NULL</td></tr>
                <tr><td><code>tipo_lamina</code></td><td>VARCHAR</td><td>NOT NULL</td></tr>
                <tr><td><code>is_active</code></td><td>BOOLEAN</td><td>Soft delete</td></tr>
                <tr><td><code>created_at</code>, <code>updated_at</code></td><td>DATETIME</td><td>Auditoría JPA</td></tr>
                </tbody>
            </table>
        </div>
    </section>
</main>
</body>
</html>

