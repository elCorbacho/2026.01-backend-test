<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>C√≥mo funciona la API ¬∑ √Ålbumes y L√°minas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <style>
        :root {
            --bg: #0f172a;
            --panel: #111827;
            --card: #0b1221;
            --stroke: #1f2937;
            --primary: #22c55e;
            --accent: #f59e0b;
            --text: #e2e8f0;
            --muted: #94a3b8;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: "Inter", system-ui, -apple-system, sans-serif;
            background: radial-gradient(circle at 20% 20%, rgba(34, 197, 94, 0.09), transparent 32%),
                        radial-gradient(circle at 80% 0%, rgba(245, 158, 11, 0.12), transparent 38%),
                        var(--bg);
            color: var(--text);
        }

        header {
            padding: 32px 24px 8px;
            max-width: 1080px;
            margin: 0 auto;
        }

        main {
            padding: 8px 24px 48px;
            max-width: 1080px;
            margin: 0 auto;
        }

        h1 {
            margin: 0 0 6px;
            font-size: clamp(28px, 4vw, 36px);
            letter-spacing: -0.02em;
        }

        p.lead {
            margin: 0;
            color: var(--muted);
        }

        .pill-row {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin: 18px 0 0;
        }

        .pill {
            border: 1px solid var(--stroke);
            background: rgba(255, 255, 255, 0.04);
            color: var(--text);
            border-radius: 999px;
            padding: 8px 14px;
            font-weight: 600;
            font-size: 14px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 16px;
            margin: 18px 0 28px;
        }

        .card {
            background: var(--card);
            border: 1px solid var(--stroke);
            border-radius: 14px;
            padding: 16px 16px 18px;
            box-shadow: 0 20px 48px rgba(0, 0, 0, 0.32);
        }

        .card h3 {
            margin: 0 0 10px;
            font-size: 18px;
        }

        .card p,
        .card li,
        .card small {
            color: var(--muted);
        }

        .list {
            display: grid;
            gap: 8px;
            padding: 0;
            margin: 10px 0 0;
            list-style: none;
        }

        .list-item {
            border: 1px solid var(--stroke);
            background: rgba(255, 255, 255, 0.03);
            padding: 12px;
            border-radius: 10px;
        }

        .muted { color: var(--muted); }
        .accent { color: var(--accent); }
        .primary { color: var(--primary); }

        code {
            background: rgba(255, 255, 255, 0.06);
            padding: 2px 6px;
            border-radius: 6px;
            border: 1px solid var(--stroke);
        }

        .stacked {
            display: grid;
            gap: 12px;
            margin: 14px 0 0;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 8px;
            background: rgba(34, 197, 94, 0.14);
            color: var(--primary);
            border: 1px solid rgba(34, 197, 94, 0.3);
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 0.01em;
        }

        a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        a:hover { text-decoration: underline; }

        @media (max-width: 640px) {
            header, main { padding-left: 16px; padding-right: 16px; }
        }
    </style>
</head>
<body>
    <header>
        <div class="badge">Vista r√°pida</div>
        <h1>C√≥mo funciona la API √Ålbumes y L√°minas</h1>
        <p class="lead">Backend Spring Boot 3.5.9 (Java 21) con controladores finos, servicios de dominio y DTOs validados.</p>
        <div class="pill-row">
            <div class="pill">Arquitectura en capas</div>
            <div class="pill">DTOs + Mappers</div>
            <div class="pill">Soft delete & Auditor√≠a</div>
            <div class="pill">ApiResponseDTO uniforme</div>
        </div>
    </header>

    <main>
        <div class="grid">
            <div class="card">
                <h3>C√≥mo usarla</h3>
                <ol class="stacked muted">
                    <li>Inicia la app y abre <a href="/swagger-ui.html">Swagger UI</a> para probar los endpoints.</li>
                    <li>Usa <code>/api/albums</code> para crear y listar √°lbumes.</li>
                    <li>Agrega l√°minas con <code>/api/laminas</code> o carga masiva en <code>/api/laminas/masivo</code>.</li>
                    <li>Consulta estado de colecci√≥n en <code>/api/albums/{albumId}/catalogo/estado</code>.</li>
                    <li>Monitorea salud en <a href="/actuator/health">/actuator/health</a>.</li>
                </ol>
            </div>

            <div class="card">
                <h3>Arquitectura</h3>
                <ul class="list">
                    <li class="list-item"><strong>Controladores API</strong> ‚Üí orquestan peticiones y devuelven ApiResponseDTO.</li>
                    <li class="list-item"><strong>Servicios</strong> ‚Üí reglas de dominio (validaci√≥n de cat√°logo, duplicados, estado).</li>
                    <li class="list-item"><strong>Repositorios</strong> ‚Üí Spring Data JPA con filtros por <code>active=true</code>.</li>
                    <li class="list-item"><strong>DTOs + Mappers</strong> ‚Üí entrada/salida tipada; nada de entidades en respuestas.</li>
                </ul>
            </div>

            <div class="card">
                <h3>Contratos de respuesta</h3>
                <p class="muted">Todas las respuestas usan <code>ApiResponseDTO</code>:</p>
                <pre style="background: rgba(255,255,255,0.03); border: 1px solid var(--stroke); border-radius: 10px; padding: 10px; overflow-x: auto; color: var(--text);">{
  "success": true,
  "message": "OK",
  "data": { ... },
  "timestamp": "2026-02-25T12:00:00Z"
}</pre>
                <small class="muted">Errores manejados por <code>GlobalExceptionHandler</code> con mensajes consistentes.</small>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <h3>Endpoints clave</h3>
                <ul class="list">
                    <li class="list-item"><strong>√Ålbumes</strong> ¬∑ <code>GET/POST /api/albums</code>, <code>GET/PUT/DELETE /api/albums/{id}</code></li>
                    <li class="list-item"><strong>L√°minas</strong> ¬∑ <code>POST /api/laminas</code>, <code>POST /api/laminas/masivo</code>, <code>GET /api/laminas/album/{albumId}</code></li>
                    <li class="list-item"><strong>Cat√°logo</strong> ¬∑ <code>POST /api/albums/{albumId}/catalogo</code>, <code>GET /api/albums/{albumId}/catalogo</code></li>
                    <li class="list-item"><strong>Estado</strong> ¬∑ <code>GET /api/albums/{albumId}/catalogo/estado</code> (pose√≠das, faltantes, repetidas)</li>
                </ul>
            </div>

            <div class="card">
                <h3>Reglas y patrones</h3>
                <ul class="list">
                    <li class="list-item">Validaci√≥n con Jakarta en DTOs de entrada.</li>
                    <li class="list-item">Soft delete: flag <code>active</code> en lugar de borrado f√≠sico.</li>
                    <li class="list-item">Auditor√≠a autom√°tica: <code>createdAt</code> y <code>updatedAt</code>.</li>
                    <li class="list-item">Excepciones de dominio: <code>ResourceNotFoundException</code>, <code>InvalidOperationException</code>.</li>
                </ul>
            </div>

            <div class="card">
                <h3>Recursos r√°pidos</h3>
                <div class="stacked">
                    <div class="list-item">üìë <a href="/swagger-ui.html">Swagger UI</a> (UI interactiva)</div>
                    <div class="list-item">üßæ <a href="/v3/api-docs">OpenAPI JSON</a> (especificaci√≥n)</div>
                    <div class="list-item">ü©∫ <a href="/actuator/health">/actuator/health</a> (salud)</div>
                </div>
            </div>
        </div>

        <div class="card" style="margin-top: 8px;">
            <h3>Flujo m√≠nimo</h3>
            <p class="muted">1) Crea un √°lbum ‚Üí 2) Genera cat√°logo maestro ‚Üí 3) Agrega l√°minas (individual o masivo) ‚Üí 4) Consulta estado y estad√≠sticas.</p>
        </div>
    </main>
</body>
</html>