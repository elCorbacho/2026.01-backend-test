<!DOCTYPE html>
<html lang="es-CL" data-bs-theme="light">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="API de Álbumes y Láminas — Spring Boot 3.5.9 · Java 21" />
    <title>API Álbumes y Láminas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
    <style>
        /* ─── Design tokens ─── */
        :root {
            --primary:       #0ea5a3;
            --primary-d:     #0f766e;
            --primary-dim:   rgba(14,165,163,.12);
            --primary-glow:  rgba(14,165,163,.20);
            --surface:       #f3f7fb;
            --surface-1:     #ffffff;
            --surface-2:     #eaf0f6;
            --border:        #d7e0ea;
            --border-soft:   rgba(148,163,184,.35);
            --text:          #0f172a;
            --text-muted:    #5b6678;
            --radius:        12px;
            --radius-lg:     16px;
        }

        /* ─── Light mode tokens ─── */
        html[data-bs-theme="dark"] {
            --surface:       #0d1117;
            --surface-1:     #161b22;
            --surface-2:     #21262d;
            --border:        #30363d;
            --border-soft:   rgba(48,54,61,.6);
            --text:          #e6edf3;
            --text-muted:    #7d8590;
            --primary-dim:   rgba(14,165,163,.18);
        }

        /* ─── Base ─── */
        *, *::before, *::after { box-sizing: border-box; }
        code, pre { font-family: "JetBrains Mono", "Fira Code", monospace; }
        body {
            font-family: "Inter", "Segoe UI", system-ui, sans-serif;
            background: var(--surface);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }
        a { color: var(--primary); }
        strong { color: inherit; }

        /* ─── Scroll progress ─── */
        #scroll-progress {
            position: fixed; top: 0; left: 0; z-index: 9999;
            height: 2px; width: 0%;
            background: var(--primary);
            transition: width .08s linear;
        }

        /* ─── Navbar ─── */
        #mainNav {
            background: rgba(255,255,255,.92) !important;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
        }
        html[data-bs-theme="dark"] #mainNav {
            background: rgba(13,17,23,.92) !important;
            border-bottom: 1px solid var(--border);
        }
        .navbar-brand {
            font-weight: 700; font-size: .95rem;
            color: var(--text) !important;
            letter-spacing: -.01em;
            display: flex; align-items: center; gap: 8px;
        }
        .brand-mark {
            width: 28px; height: 28px; border-radius: 8px;
            background: var(--primary);
            display: inline-flex; align-items: center; justify-content: center;
            color: #022c1a; font-size: .85rem; font-weight: 700; flex-shrink: 0;
        }
        .nav-link {
            color: var(--text-muted) !important;
            font-weight: 500; font-size: .875rem;
            border-radius: 6px;
            transition: color .15s, background .15s;
        }
        .nav-link:hover { color: var(--text) !important; background: var(--surface-2) !important; }
        .nav-link.active { color: var(--text) !important; background: var(--surface-2) !important; }

        /* theme toggle */
        .theme-toggle {
            display: flex; align-items: center; gap: 6px;
            cursor: pointer; user-select: none; padding: 4px;
        }
        .toggle-icon { font-size: .9rem; line-height: 1; transition: opacity .25s; }
        .toggle-icon.sun  { color: #f59e0b; }
        .toggle-icon.moon { color: #818cf8; }
        html[data-bs-theme="dark"]  .toggle-icon.sun  { opacity: .3; }
        html[data-bs-theme="dark"]  .toggle-icon.moon { opacity: 1; }
        html[data-bs-theme="light"] .toggle-icon.sun  { opacity: 1; }
        html[data-bs-theme="light"] .toggle-icon.moon { opacity: .3; }
        .toggle-track {
            position: relative; width: 40px; height: 22px;
            border-radius: 999px; border: 1px solid var(--border);
            background: var(--surface-2);
            transition: background .3s, border-color .3s;
        }
        html[data-bs-theme="light"] .toggle-track { background: var(--surface-1); }
        .toggle-thumb {
            position: absolute; top: 2px; left: 2px;
            width: 16px; height: 16px; border-radius: 50%;
            background: #818cf8;
            box-shadow: 0 1px 3px rgba(0,0,0,.25);
            transition: left .25s cubic-bezier(.4,0,.2,1), background .25s;
        }
        html[data-bs-theme="light"] .toggle-thumb { left: 20px; background: #f59e0b; }

        /* ─── Buttons ─── */
        .btn-primary-solid {
            background: var(--primary); color: #022c1a; font-weight: 600;
            border: none; border-radius: var(--radius); padding: 8px 16px;
            transition: filter .15s, transform .15s;
            font-size: .875rem;
        }
        .btn-primary-solid:hover { filter: brightness(1.08); color: #022c1a; transform: translateY(-1px); }

        .btn-ghost {
            background: transparent; color: var(--text-muted);
            border: 1px solid var(--border); border-radius: var(--radius);
            font-weight: 500; font-size: .875rem; padding: 8px 16px;
            transition: color .15s, border-color .15s, background .15s;
        }
        .btn-ghost:hover { color: var(--text); border-color: var(--text-muted); background: var(--surface-2); }

        /* ─── Hero ─── */
        #hero-section {
            border-bottom: 1px solid var(--border);
            padding: 80px 0 64px;
        }
        .hero-eyebrow {
            display: inline-flex; align-items: center; gap: 6px;
            background: var(--primary-dim); border: 1px solid rgba(16,185,129,.25);
            border-radius: 999px; padding: 4px 12px;
            font-size: .75rem; font-weight: 600; color: var(--primary);
            letter-spacing: .02em; margin-bottom: 20px;
        }
        .hero-title {
            font-size: clamp(2rem, 5vw, 3.25rem);
            font-weight: 800; letter-spacing: -.03em; line-height: 1.1;
            color: var(--text); margin-bottom: 16px;
        }
        .hero-sub {
            font-size: 1.05rem; color: var(--text-muted);
            max-width: 580px; margin-bottom: 32px; line-height: 1.65;
        }
        .health-pill {
            display: inline-flex; align-items: center; gap: 6px;
            background: var(--surface-1); border: 1px solid var(--border);
            border-radius: 999px; padding: 4px 12px; font-size: .78rem;
            font-weight: 500; color: var(--text-muted);
        }
        #health-dot {
            width: 7px; height: 7px; border-radius: 50%;
            background: var(--text-muted); display: inline-block;
            transition: background .4s;
        }
        #health-dot.up   { background: var(--primary); animation: pulse-dot 2.5s infinite; }
        #health-dot.down { background: #f85149; }
        @keyframes pulse-dot {
            0%,100% { opacity: 1; } 50% { opacity: .45; }
        }

        /* ─── Stats bar ─── */
        .stats-bar {
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
            background: var(--surface-1);
        }
        .stat-item { padding: 20px 0; text-align: center; }
        .stat-item + .stat-item { border-left: 1px solid var(--border); }
        .stat-num {
            font-size: 1.75rem; font-weight: 800; color: var(--text);
            letter-spacing: -.02em; line-height: 1;
        }
        .stat-lbl { font-size: .75rem; color: var(--text-muted); font-weight: 500; margin-top: 4px; }

        /* ─── Section layout ─── */
        .page-section {
            border-bottom: 1px solid var(--border);
            padding: 56px 0;
        }
        .section-label {
            display: inline-flex; align-items: center; gap: 5px;
            font-size: .72rem; font-weight: 700; letter-spacing: .08em;
            text-transform: uppercase; color: var(--primary);
            margin-bottom: 8px;
        }
        .section-title {
            font-size: 1.5rem; font-weight: 700; letter-spacing: -.02em;
            color: var(--text); margin-bottom: 4px;
        }
        .section-sub { color: var(--text-muted); font-size: .9rem; margin-bottom: 32px; }

        /* ─── Cards ─── */
        .card-base {
            background: var(--surface-1);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 20px 22px;
            transition: border-color .2s, box-shadow .2s;
        }
        .card-base:hover {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-dim);
        }
        .card-icon {
            width: 36px; height: 36px; border-radius: 10px;
            background: var(--primary-dim); border: 1px solid rgba(16,185,129,.2);
            display: flex; align-items: center; justify-content: center;
            color: var(--primary); font-size: .95rem; margin-bottom: 14px;
        }

        /* ─── Feature list ─── */
        .feature-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 10px; }
        .feature-list li { display: flex; align-items: flex-start; gap: 10px; font-size: .9rem; }
        .feature-list li i { color: var(--primary); font-size: .85rem; margin-top: 3px; flex-shrink: 0; }

        /* ─── Code blocks ─── */
        .code-wrap { position: relative; margin-top: 12px; }
        .code-header {
            display: flex; align-items: center; gap: 6px;
            background: var(--surface-2); border: 1px solid var(--border);
            border-bottom: 0; border-radius: var(--radius) var(--radius) 0 0;
            padding: 7px 12px;
        }
        .code-dot { width: 9px; height: 9px; border-radius: 50%; display: inline-block; }
        .code-dot.r { background: #f85149; } .code-dot.y { background: #d29922; } .code-dot.g { background: #3fb950; }
        .code-file { font-size: .72rem; color: var(--text-muted); margin-left: 4px; }
        .code-wrap pre {
            background: var(--surface-1); border: 1px solid var(--border);
            border-radius: 0 0 var(--radius) var(--radius);
            padding: 14px 16px; margin: 0; overflow-x: auto;
            font-size: .8rem; color: var(--text); line-height: 1.6;
        }
        .btn-copy {
            position: absolute; top: 38px; right: 8px;
            background: var(--surface-2); border: 1px solid var(--border);
            color: var(--text-muted); border-radius: 6px; padding: 2px 8px;
            font-size: .7rem; cursor: pointer; transition: color .15s, background .15s;
        }
        .btn-copy:hover  { background: var(--primary-dim); color: var(--primary); border-color: rgba(16,185,129,.3); }
        .btn-copy.copied { background: var(--primary-dim); color: var(--primary); border-color: rgba(16,185,129,.3); }

        /* ─── Field tags ─── */
        .ftag {
            display: inline-flex; align-items: center; gap: 4px;
            padding: 3px 10px; border-radius: 6px;
            border: 1px solid var(--border); background: var(--surface-2);
            font-size: .73rem; font-weight: 500; color: var(--text-muted);
            font-family: "JetBrains Mono", monospace;
        }
        .ftag.pk   { border-color: rgba(210,153,34,.4);   background: rgba(210,153,34,.08);   color: #d29922; }
        .ftag.fk   { border-color: rgba(88,166,255,.4);   background: rgba(88,166,255,.08);   color: #58a6ff; }
        .ftag.audit{ border-color: rgba(188,140,240,.4);  background: rgba(188,140,240,.08);  color: #bc8cf0; }
        .ftag.soft { border-color: rgba(63,185,80,.4);    background: rgba(63,185,80,.08);    color: #3fb950; }

        /* ─── DB tabs ─── */
        .db-tabs .nav-link {
            background: transparent; border: 1px solid var(--border) !important;
            border-radius: 8px !important; color: var(--text-muted) !important;
            font-weight: 500; font-size: .85rem; margin-right: 6px; margin-bottom: 6px;
            transition: all .15s;
        }
        .db-tabs .nav-link.active {
            background: var(--primary-dim) !important;
            border-color: rgba(16,185,129,.35) !important;
            color: var(--primary) !important;
        }
        .db-tabs .nav-link:hover:not(.active) {
            background: var(--surface-2) !important;
            color: var(--text) !important;
        }

        /* ─── Relations table ─── */
        .rel-table { border-collapse: collapse; width: 100%; font-size: .86rem; }
        .rel-table th {
            background: var(--surface-2); color: var(--text-muted);
            font-weight: 600; font-size: .78rem; letter-spacing: .04em; text-transform: uppercase;
        }
        .rel-table th, .rel-table td { border: 1px solid var(--border); padding: 10px 14px; }
        .rel-table td { color: var(--text-muted); }
        .rel-table tr:hover td { background: var(--surface-2); color: var(--text); }

        .db-pill {
            display: inline-flex; align-items: center; gap: 6px;
            background: var(--surface-2); border: 1px solid var(--border);
            border-radius: 999px; padding: 5px 10px;
            font-size: .76rem; font-weight: 600; color: var(--text-muted);
        }
        .schema-col-table {
            border-collapse: collapse; width: 100%; font-size: .85rem;
        }
        .schema-col-table th {
            background: var(--surface-2); color: var(--text-muted);
            font-weight: 600; font-size: .78rem; letter-spacing: .04em; text-transform: uppercase;
        }
        .schema-col-table th, .schema-col-table td { border: 1px solid var(--border); padding: 10px 12px; vertical-align: middle; }
        .schema-col-table td { color: var(--text-muted); }
        .schema-col-table tr:hover td { background: var(--surface-2); color: var(--text); }
        .erd-grid { display: grid; grid-template-columns: 1fr auto 1fr; gap: 14px; align-items: center; }
        .erd-link { text-align: center; color: var(--text-muted); font-size: .78rem; font-weight: 600; }
        .erd-link .line { width: 68px; height: 2px; background: var(--primary-dim); margin: 6px auto; }
        .rule-title { font-size: .9rem; font-weight: 700; margin-bottom: 6px; color: var(--text); }
        .rule-copy  { font-size: .85rem; color: var(--text-muted); margin: 0; }
        @media(max-width: 991px) {
            .erd-grid { grid-template-columns: 1fr; }
            .erd-link { display: none; }
        }

        /* ─── Accordion ─── */
        .accordion-item {
            background: var(--surface-1) !important; border: 1px solid var(--border) !important;
            border-radius: var(--radius) !important; margin-bottom: 6px; overflow: hidden;
        }
        .accordion-button {
            background: var(--surface-1) !important; color: var(--text) !important;
            font-weight: 600; border-radius: var(--radius) !important;
            box-shadow: none !important; font-size: .9rem;
        }
        .accordion-button:not(.collapsed) {
            background: var(--primary-dim) !important;
            color: var(--primary) !important;
        }
        .accordion-button::after { filter: none; }
        html[data-bs-theme="dark"] .accordion-button::after { filter: invert(.6) brightness(.8); }
        .accordion-body { color: var(--text-muted); font-size: .9rem; }

        /* ─── Step badge ─── */
        .step-num {
            display: inline-flex; align-items: center; justify-content: center;
            width: 24px; height: 24px; border-radius: 6px; font-weight: 700; font-size: .78rem;
            background: var(--primary-dim); color: var(--primary);
            border: 1px solid rgba(16,185,129,.3); flex-shrink: 0;
        }

        /* ─── Footer ─── */
        .site-footer {
            border-top: 1px solid var(--border);
            background: var(--surface-1);
            padding: 28px 0;
        }
        .footer-inner { display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 16px; }
        .footer-brand { font-weight: 700; font-size: .88rem; color: var(--text); display: flex; align-items: center; gap: 8px; }
        .footer-links { display: flex; gap: 20px; flex-wrap: wrap; }
        .footer-links a { color: var(--text-muted); text-decoration: none; font-size: .82rem; font-weight: 500; transition: color .15s; }
        .footer-links a:hover { color: var(--text); }
        .footer-copy { color: var(--text-muted); font-size: .78rem; }

        /* ─── Back to top ─── */
        #backTop {
            position: fixed; bottom: 24px; right: 24px; z-index: 500;
            width: 38px; height: 38px; border-radius: 8px;
            background: var(--surface-2); border: 1px solid var(--border);
            color: var(--text-muted);
            display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none;
            transition: opacity .2s, color .15s, border-color .15s;
            cursor: pointer;
        }
        #backTop.show { opacity: 1; pointer-events: all; }
        #backTop:hover { color: var(--primary); border-color: rgba(16,185,129,.4); }

        /* ─── Scroll-reveal ─── */
        .reveal { opacity: 0; transform: translateY(16px); transition: opacity .5s ease, transform .5s ease; }
        .reveal.visible { opacity: 1; transform: none; }

        /* ─── Offcanvas ─── */
        .offcanvas {
            background: var(--surface-1) !important;
            border-left: 1px solid var(--border) !important;
        }

        /* ─── Toast ─── */
        .toast-container { z-index: 9999; }

        /* ─── Misc utils ─── */
        .text-primary-em { color: var(--primary); }
        .border-subtle   { border-color: var(--border) !important; }
        @media(max-width:576px) { .hero-title { font-size: 1.9rem; } .stat-num { font-size: 1.4rem; } }
    </style>
</head>
<body>
<div id="scroll-progress"></div>

<!-- NAVBAR -->
<nav id="mainNav" class="navbar navbar-expand-lg sticky-top py-2">
    <div class="container">
        <a class="navbar-brand" href="#inicio">
            <span class="brand-mark"><i class="bi bi-collection-fill"></i></span>
            Álbumes &amp; Láminas
        </a>
        <div class="collapse navbar-collapse" id="navbarDesktop">
            <ul class="navbar-nav mx-auto gap-1">
                <li class="nav-item"><a class="nav-link px-3 py-1" href="#overview">API</a></li>
                <li class="nav-item"><a class="nav-link px-3 py-1" href="#setup">Setup</a></li>
                <li class="nav-item"><a class="nav-link px-3 py-1" href="#datos">Base de datos</a></li>
                <li class="nav-item"><a class="nav-link px-3 py-1" href="#estructura-app">Estructura app</a></li>
                <li class="nav-item"><a class="nav-link px-3 py-1" href="#vistas">Vistas</a></li>
                <li class="nav-item"><a class="nav-link px-3 py-1" href="#recursos">Recursos</a></li>
                <li class="nav-item"><a class="nav-link px-3 py-1" href="#sdd">SDD</a></li>
            </ul>
        </div>
        <div class="d-flex align-items-center gap-2">
            <div class="theme-toggle" id="themeToggle" role="button" aria-label="Cambiar tema" title="Cambiar tema">
                <i class="bi bi-sun-fill toggle-icon sun"></i>
                <div class="toggle-track"><div class="toggle-thumb"></div></div>
                <i class="bi bi-moon-stars-fill toggle-icon moon"></i>
            </div>
            <a class="btn btn-primary-solid btn-sm d-none d-lg-inline-flex" href="/swagger-ui.html">
                <i class="bi bi-arrow-up-right-square me-1"></i>Swagger UI
            </a>
            <button class="navbar-toggler border-0 p-1" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu">
                <i class="bi bi-list fs-4" style="color:var(--text)"></i>
            </button>
        </div>
    </div>
</nav>

<!-- OFFCANVAS MOBILE -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasMenu">
    <div class="offcanvas-header" style="border-bottom:1px solid var(--border)">
        <span class="fw-bold" style="color:var(--text)">Navegación</span>
        <button class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body d-flex flex-column gap-2 pt-4">
        <a href="#overview" class="btn btn-ghost text-start" data-bs-dismiss="offcanvas"><i class="bi bi-lightning-charge me-2"></i>API Overview</a>
        <a href="#setup"    class="btn btn-ghost text-start" data-bs-dismiss="offcanvas"><i class="bi bi-terminal me-2"></i>Setup</a>
        <a href="#datos"    class="btn btn-ghost text-start" data-bs-dismiss="offcanvas"><i class="bi bi-database me-2"></i>Base de datos</a>
        <a href="#estructura-app" class="btn btn-ghost text-start" data-bs-dismiss="offcanvas"><i class="bi bi-diagram-2 me-2"></i>Estructura app</a>
        <a href="#vistas"   class="btn btn-ghost text-start" data-bs-dismiss="offcanvas"><i class="bi bi-window me-2"></i>Vistas</a>
        <a href="#recursos" class="btn btn-ghost text-start" data-bs-dismiss="offcanvas"><i class="bi bi-link-45deg me-2"></i>Recursos</a>
        <a href="#sdd"      class="btn btn-ghost text-start" data-bs-dismiss="offcanvas"><i class="bi bi-diagram-3 me-2"></i>SDD</a>
        <hr style="border-color:var(--border)" />
        <a href="/swagger-ui.html" class="btn btn-primary-solid"><i class="bi bi-arrow-up-right-square me-2"></i>Abrir Swagger</a>
    </div>
</div>

<!-- HERO -->
<div id="hero-section" id="inicio">
    <div class="container">
        <div class="row align-items-center gy-4">
            <div class="col-lg-8">
                <div class="hero-eyebrow">
                    <i class="bi bi-server"></i>Spring Boot 3.5.9 &middot; Java 21
                </div>
                <h1 class="hero-title">API Álbumes<br class="d-none d-md-block"> y Láminas</h1>
                <p class="hero-sub">Landing unificada con resumen de arquitectura, guía de montaje, estructura de base de datos y acceso directo a la documentación interactiva.</p>
                <div class="d-flex flex-wrap gap-2 mb-4">
                    <a class="btn btn-primary-solid" href="/swagger-ui.html"><i class="bi bi-play-circle me-1"></i>Abrir Swagger</a>
                    <a class="btn btn-ghost" href="/v3/api-docs"><i class="bi bi-braces me-1"></i>OpenAPI JSON</a>
                    <a class="btn btn-ghost" href="/actuator/health"><i class="bi bi-activity me-1"></i>Health Check</a>
                </div>
                <div class="health-pill">
                    <span id="health-dot"></span>
                    <span id="health-label">Verificando…</span>
                </div>
            </div>
            <div class="col-lg-4 d-none d-lg-block">
                <div class="card-base">
                    <div class="d-flex flex-wrap gap-2">
                        <span class="ftag"><i class="bi bi-layers me-1"></i>Arquitectura en capas</span>
                        <span class="ftag"><i class="bi bi-shuffle me-1"></i>DTOs + Mappers</span>
                        <span class="ftag soft"><i class="bi bi-trash me-1"></i>Soft delete</span>
                        <span class="ftag audit"><i class="bi bi-clock-history me-1"></i>Auditoría JPA</span>
                        <span class="ftag"><i class="bi bi-shield-check me-1"></i>Jakarta Validation</span>
                        <span class="ftag"><i class="bi bi-exclamation-octagon me-1"></i>GlobalExceptionHandler</span>
                        <span class="ftag"><i class="bi bi-book me-1"></i>OpenAPI 3.0</span>
                        <span class="ftag"><i class="bi bi-activity me-1"></i>Actuator</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- STATS BAR -->
<div class="stats-bar reveal">
    <div class="container">
        <div class="row g-0">
            <div class="col-6 col-md-3"><div class="stat-item"><div class="stat-num" data-count="4">0</div><div class="stat-lbl">Entidades JPA</div></div></div>
            <div class="col-6 col-md-3"><div class="stat-item"><div class="stat-num" data-count="18">0</div><div class="stat-lbl">Endpoints REST</div></div></div>
            <div class="col-6 col-md-3"><div class="stat-item"><div class="stat-num" data-count="6">0</div><div class="stat-lbl">Capas de arquitectura</div></div></div>
            <div class="col-6 col-md-3"><div class="stat-item"><div class="stat-num" data-count="21">0</div><div class="stat-lbl">Java version</div></div></div>
        </div>
    </div>
</div>

<!-- SEC: API OVERVIEW -->
<div class="page-section" id="overview">
    <div class="container">
        <div class="reveal">
            <div class="section-label"><i class="bi bi-lightning-charge-fill"></i>API Overview</div>
            <h2 class="section-title">Resumen rápido</h2>
            <p class="section-sub">Accede a la documentación, especificación y estado del servicio.</p>
        </div>
        <div class="row g-3 mb-4 reveal">
            <div class="col-12 col-md-4">
                <div class="card-base h-100 d-flex flex-column">
                    <div class="card-icon"><i class="bi bi-book-half"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Documentación interactiva</h5>
                    <p class="flex-grow-1" style="font-size:.875rem;color:var(--text-muted);">Explora y prueba todos los endpoints directamente desde Swagger UI en el browser.</p>
                    <a class="btn btn-primary-solid btn-sm mt-3" href="/swagger-ui.html"><i class="bi bi-arrow-up-right-square me-1"></i>Abrir Swagger</a>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="card-base h-100 d-flex flex-column">
                    <div class="card-icon"><i class="bi bi-braces-asterisk"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Especificación OpenAPI</h5>
                    <p class="flex-grow-1" style="font-size:.875rem;color:var(--text-muted);">OpenAPI 3.0 en JSON para generar SDKs, clientes o contract tests automáticos.</p>
                    <a class="btn btn-ghost btn-sm mt-3" href="/v3/api-docs"><i class="bi bi-download me-1"></i>Ver JSON</a>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="card-base h-100 d-flex flex-column">
                    <div class="card-icon"><i class="bi bi-activity"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Estado del servicio</h5>
                    <p class="flex-grow-1" style="font-size:.875rem;color:var(--text-muted);">Consulta la salud del servicio y readiness vía Spring Actuator.</p>
                    <a class="btn btn-ghost btn-sm mt-3" href="/actuator/health"><i class="bi bi-activity me-1"></i>Ver health</a>
                </div>
            </div>
        </div>
        <div class="card-base reveal">
            <h5 class="fw-bold mb-3" style="font-size:.95rem;">Pilares y contrato de respuesta</h5>
            <div class="row g-4">
                <div class="col-12 col-lg-6">
                    <ul class="feature-list">
                        <li><i class="bi bi-check-circle-fill"></i><span><strong>Validación</strong> con anotaciones Jakarta en cada DTO de entrada.</span></li>
                        <li><i class="bi bi-check-circle-fill"></i><span><strong>Servicios transaccionales</strong> con <code>@Transactional</code> y <code>readOnly=true</code> en lecturas.</span></li>
                        <li><i class="bi bi-check-circle-fill"></i><span><strong>GlobalExceptionHandler</strong>: <code>ResourceNotFoundException</code>, <code>InvalidOperationException</code>.</span></li>
                        <li><i class="bi bi-check-circle-fill"></i><span><strong>Soft delete</strong> con campo <code>active</code> — nunca se borra una fila físicamente.</span></li>
                        <li><i class="bi bi-check-circle-fill"></i><span><strong>Auditoría JPA</strong> automática vía <code>@CreatedDate</code> / <code>@LastModifiedDate</code>.</span></li>
                    </ul>
                </div>
                <div class="col-12 col-lg-6">
                    <p style="font-size:.85rem;color:var(--text-muted);" class="mb-2">Todas las respuestas usan <code>ApiResponseDTO&lt;T&gt;</code>:</p>
                    <div class="code-wrap">
                        <div class="code-header">
                            <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                            <span class="code-file">ApiResponseDTO.java</span>
                        </div>
                        <pre id="pre-apiresp">{
  "success":   true,
  "message":   "OK",
  "data":      { ... },
  "timestamp": "2026-02-26T12:00:00Z"
}</pre>
                        <button class="btn-copy" style="top:38px" onclick="copyCode('pre-apiresp',this)"><i class="bi bi-copy me-1"></i>Copiar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SEC: SETUP -->
<div class="page-section" id="setup">
    <div class="container">
        <div class="reveal">
            <div class="section-label"><i class="bi bi-terminal-fill"></i>Setup</div>
            <h2 class="section-title">Guía rápida de montaje</h2>
            <p class="section-sub">Cuatro pasos para levantar el servicio localmente.</p>
        </div>
        <div class="row g-2 mb-3 reveal">
            <div class="col-6 col-md-3"><div class="card-base text-center py-3"><div class="step-num mx-auto mb-2">1</div><div class="fw-semibold" style="font-size:.82rem;">Prerrequisitos</div></div></div>
            <div class="col-6 col-md-3"><div class="card-base text-center py-3"><div class="step-num mx-auto mb-2">2</div><div class="fw-semibold" style="font-size:.82rem;">Clonar y arrancar</div></div></div>
            <div class="col-6 col-md-3"><div class="card-base text-center py-3"><div class="step-num mx-auto mb-2">3</div><div class="fw-semibold" style="font-size:.82rem;">Configurar BD</div></div></div>
            <div class="col-6 col-md-3"><div class="card-base text-center py-3"><div class="step-num mx-auto mb-2">4</div><div class="fw-semibold" style="font-size:.82rem;">Verificar</div></div></div>
        </div>
        <div class="accordion mb-0 reveal" id="setupAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#step1">
                        <span class="step-num me-3">1</span>Prerrequisitos
                    </button>
                </h2>
                <div id="step1" class="accordion-collapse collapse show" data-bs-parent="#setupAccordion">
                    <div class="accordion-body">
                        <ul class="feature-list">
                            <li><i class="bi bi-check2-circle"></i><span><strong>Java 21</strong> en el PATH.</span></li>
                            <li><i class="bi bi-check2-circle"></i><span>Maven wrapper (<code>mvnw</code> / <code>mvnw.cmd</code>) incluido en el repo.</span></li>
                            <li><i class="bi bi-check2-circle"></i><span>Puerto <strong>8080</strong> libre (configurable en <code>application.properties</code>).</span></li>
                            <li><i class="bi bi-check2-circle"></i><span>Opcional: <strong>MySQL / MariaDB</strong> para producción.</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#step2">
                        <span class="step-num me-3">2</span>Clonar y arrancar
                    </button>
                </h2>
                <div id="step2" class="accordion-collapse collapse" data-bs-parent="#setupAccordion">
                    <div class="accordion-body">
                        <div class="code-wrap">
                            <div class="code-header">
                                <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                                <span class="code-file">bash</span>
                            </div>
                            <pre id="pre-clone">git clone &lt;repo-url&gt;
cd 2026.01-backend-test

# Windows
./mvnw.cmd clean install
./mvnw.cmd spring-boot:run

# Linux / Mac
./mvnw clean install
./mvnw spring-boot:run</pre>
                            <button class="btn-copy" style="top:38px" onclick="copyCode('pre-clone',this)"><i class="bi bi-copy me-1"></i>Copiar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#step3">
                        <span class="step-num me-3">3</span>Configurar base de datos
                    </button>
                </h2>
                <div id="step3" class="accordion-collapse collapse" data-bs-parent="#setupAccordion">
                    <div class="accordion-body">
                        <p style="font-size:.875rem;margin-bottom:8px;">Edita <code>src/main/resources/application.properties</code>:</p>
                        <div class="code-wrap">
                            <div class="code-header">
                                <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                                <span class="code-file">application.properties</span>
                            </div>
                            <pre id="pre-props">spring.datasource.url=jdbc:mysql://localhost:3306/albumes
spring.datasource.username=usuario
spring.datasource.password=clave
server.port=8080</pre>
                            <button class="btn-copy" style="top:38px" onclick="copyCode('pre-props',this)"><i class="bi bi-copy me-1"></i>Copiar</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#step4">
                        <span class="step-num me-3">4</span>Verificar el arranque
                    </button>
                </h2>
                <div id="step4" class="accordion-collapse collapse" data-bs-parent="#setupAccordion">
                    <div class="accordion-body">
                        <ul class="feature-list">
                            <li><i class="bi bi-arrow-right-circle"></i><span>Swagger UI → <a href="/swagger-ui.html">/swagger-ui.html</a></span></li>
                            <li><i class="bi bi-arrow-right-circle"></i><span>Health check → <a href="/actuator/health">/actuator/health</a></span></li>
                            <li><i class="bi bi-arrow-right-circle"></i><span>OpenAPI JSON → <a href="/v3/api-docs">/v3/api-docs</a></span></li>
                            <li><i class="bi bi-arrow-right-circle"></i><span>Arranque en <strong>~2-3 segundos</strong> tras el build.</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SEC: BASE DE DATOS -->
<div class="page-section" id="datos">
    <div class="container">
        <div class="reveal">
            <div class="section-label"><i class="bi bi-database-fill"></i>Base de datos</div>
            <h2 class="section-title">Estructura completa integrada</h2>
            <p class="section-sub">Contenido incorporado desde <code>db-estructura.html</code> manteniendo el estilo visual actual del sitio principal.</p>
        </div>

        <div class="d-flex flex-wrap gap-2 mb-4 reveal">
            <span class="db-pill"><i class="bi bi-diagram-3"></i>ERD</span>
            <span class="db-pill"><i class="bi bi-table"></i>Detalle de columnas</span>
            <span class="db-pill"><i class="bi bi-code-slash"></i>DDL SQL</span>
            <span class="db-pill"><i class="bi bi-shield-check"></i>Reglas de persistencia</span>
        </div>
        <div class="mb-4 reveal">
            <a class="btn btn-primary btn-sm" href="/db/estructura-detallada">
                <i class="bi bi-box-arrow-up-right me-1"></i>Ver vista detallada independiente
            </a>
        </div>

        <div class="card-base mb-4 reveal">
            <h5 class="fw-bold mb-3" style="font-size:.95rem;"><i class="bi bi-diagram-2 me-2 text-primary-em"></i>Diagrama de relaciones</h5>
            <div class="erd-grid">
                <div class="card-base p-0">
                    <div class="px-3 py-2 border-bottom border-subtle fw-bold" style="font-size:.85rem;"><i class="bi bi-collection-fill me-2"></i>album</div>
                    <div class="px-3 py-2" style="font-size:.8rem;color:var(--text-muted);font-family:'JetBrains Mono',monospace;">id (PK), nombre, year, descripcion, is_active, created_at, updated_at</div>
                </div>
                <div class="erd-link">
                    1 ? N
                    <div class="line"></div>
                    l?minas / cat?logo
                </div>
                <div class="d-grid gap-3">
                    <div class="card-base p-0">
                        <div class="px-3 py-2 border-bottom border-subtle fw-bold" style="font-size:.85rem;"><i class="bi bi-image-fill me-2"></i>lamina</div>
                        <div class="px-3 py-2" style="font-size:.8rem;color:var(--text-muted);font-family:'JetBrains Mono',monospace;">id (PK), album_id (FK), nombre, imagen, fecha_lanzamiento, tipo_lamina, is_active...</div>
                    </div>
                    <div class="card-base p-0">
                        <div class="px-3 py-2 border-bottom border-subtle fw-bold" style="font-size:.85rem;"><i class="bi bi-bookmark-star-fill me-2"></i>lamina_catalogo</div>
                        <div class="px-3 py-2" style="font-size:.8rem;color:var(--text-muted);font-family:'JetBrains Mono',monospace;">id (PK), album_id (FK), nombre (UQ por ?lbum), imagen, fecha_lanzamiento, tipo_lamina...</div>
                    </div>
                </div>
            </div>
            <div class="d-flex flex-wrap gap-2 mt-3">
                <span class="ftag pk">PK</span>
                <span class="ftag fk">FK</span>
                <span class="ftag">UQ (album_id, nombre)</span>
                <span class="ftag soft">Soft delete</span>
                <span class="ftag audit">Auditor?a</span>
            </div>
        </div>

        <div class="reveal mb-3">
            <h5 class="fw-bold mb-3" style="font-size:.95rem;"><i class="bi bi-table me-2 text-primary-em"></i>Detalle de columnas</h5>
        </div>

        <div class="card-base mb-3 reveal">
            <h6 class="fw-bold mb-3" style="font-size:.9rem;"><i class="bi bi-collection-fill me-2"></i>Tabla <code>album</code></h6>
            <div class="table-responsive">
                <table class="schema-col-table">
                    <thead><tr><th>Columna</th><th>Tipo SQL</th><th>Java</th><th>Restricciones</th></tr></thead>
                    <tbody>
                        <tr><td><code>id</code></td><td>BIGINT</td><td>Long</td><td>PK + auto increment</td></tr>
                        <tr><td><code>nombre</code></td><td>VARCHAR(255)</td><td>String</td><td>NOT NULL</td></tr>
                        <tr><td><code>year</code></td><td>INT</td><td>Integer</td><td>NOT NULL</td></tr>
                        <tr><td><code>descripcion</code></td><td>VARCHAR(500)</td><td>String</td><td>Opcional</td></tr>
                        <tr><td><code>is_active</code></td><td>BOOLEAN</td><td>Boolean</td><td>Soft delete</td></tr>
                        <tr><td><code>created_at</code>, <code>updated_at</code></td><td>DATETIME</td><td>LocalDateTime</td><td>Auditor?a JPA</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card-base mb-3 reveal">
            <h6 class="fw-bold mb-3" style="font-size:.9rem;"><i class="bi bi-image-fill me-2"></i>Tabla <code>lamina</code></h6>
            <div class="table-responsive">
                <table class="schema-col-table">
                    <thead><tr><th>Columna</th><th>Tipo SQL</th><th>Java</th><th>Restricciones</th></tr></thead>
                    <tbody>
                        <tr><td><code>id</code></td><td>BIGINT</td><td>Long</td><td>PK + auto increment</td></tr>
                        <tr><td><code>album_id</code></td><td>BIGINT</td><td>Album</td><td>FK ? album(id), NOT NULL</td></tr>
                        <tr><td><code>nombre</code></td><td>VARCHAR(255)</td><td>String</td><td>NOT NULL</td></tr>
                        <tr><td><code>imagen</code></td><td>VARCHAR(255)</td><td>String</td><td>Opcional</td></tr>
                        <tr><td><code>fecha_lanzamiento</code></td><td>DATE</td><td>LocalDate</td><td>NOT NULL</td></tr>
                        <tr><td><code>tipo_lamina</code></td><td>VARCHAR(255)</td><td>String</td><td>NOT NULL</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card-base mb-4 reveal">
            <h6 class="fw-bold mb-3" style="font-size:.9rem;"><i class="bi bi-bookmark-star-fill me-2"></i>Tabla <code>lamina_catalogo</code></h6>
            <div class="table-responsive">
                <table class="schema-col-table">
                    <thead><tr><th>Columna</th><th>Tipo SQL</th><th>Java</th><th>Restricciones</th></tr></thead>
                    <tbody>
                        <tr><td><code>id</code></td><td>BIGINT</td><td>Long</td><td>PK + auto increment</td></tr>
                        <tr><td><code>album_id</code></td><td>BIGINT</td><td>Album</td><td>FK ? album(id), NOT NULL</td></tr>
                        <tr><td><code>nombre</code></td><td>VARCHAR(255)</td><td>String</td><td>NOT NULL + UQ compuesto</td></tr>
                        <tr><td><code>imagen</code></td><td>VARCHAR(255)</td><td>String</td><td>Opcional</td></tr>
                        <tr><td><code>fecha_lanzamiento</code></td><td>DATE</td><td>LocalDate</td><td>NOT NULL</td></tr>
                        <tr><td><code>tipo_lamina</code></td><td>VARCHAR(255)</td><td>String</td><td>NOT NULL</td></tr>
                    </tbody>
                </table>
            </div>
            <p class="mt-3 mb-0" style="font-size:.82rem;color:var(--text-muted);">La restricci?n ?nica es <code>(album_id, nombre)</code>: el nombre no se repite dentro del mismo ?lbum.</p>
        </div>

        <div class="reveal mb-3">
            <h5 class="fw-bold mb-3" style="font-size:.95rem;"><i class="bi bi-code-slash me-2 text-primary-em"></i>DDL SQL</h5>
        </div>

        <div class="row g-3 reveal">
            <div class="col-12 col-lg-4">
                <div class="card-base h-100">
                    <div class="code-wrap mt-0">
                        <div class="code-header"><span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span><span class="code-file">album.sql</span></div>
                        <pre id="sql-album">CREATE TABLE album (
  id BIGINT NOT NULL AUTO_INCREMENT,
  nombre VARCHAR(255) NOT NULL,
  year INT NOT NULL,
  descripcion VARCHAR(500),
  is_active BOOLEAN DEFAULT TRUE,
  created_at DATETIME(6),
  updated_at DATETIME(6),
  PRIMARY KEY (id)
);</pre>
                        <button class="btn-copy" style="top:38px" onclick="copyCode('sql-album',this)"><i class="bi bi-copy me-1"></i>Copiar</button>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-4">
                <div class="card-base h-100">
                    <div class="code-wrap mt-0">
                        <div class="code-header"><span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span><span class="code-file">lamina.sql</span></div>
                        <pre id="sql-lamina">CREATE TABLE lamina (
  id BIGINT NOT NULL AUTO_INCREMENT,
  album_id BIGINT NOT NULL,
  nombre VARCHAR(255) NOT NULL,
  imagen VARCHAR(255),
  fecha_lanzamiento DATE NOT NULL,
  tipo_lamina VARCHAR(255) NOT NULL,
  is_active BOOLEAN DEFAULT TRUE,
  created_at DATETIME(6),
  updated_at DATETIME(6),
  PRIMARY KEY (id),
  CONSTRAINT fk_lamina_album
    FOREIGN KEY (album_id) REFERENCES album(id)
);</pre>
                        <button class="btn-copy" style="top:38px" onclick="copyCode('sql-lamina',this)"><i class="bi bi-copy me-1"></i>Copiar</button>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-4">
                <div class="card-base h-100">
                    <div class="code-wrap mt-0">
                        <div class="code-header"><span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span><span class="code-file">lamina_catalogo.sql</span></div>
                        <pre id="sql-catalogo">CREATE TABLE lamina_catalogo (
  id BIGINT NOT NULL AUTO_INCREMENT,
  album_id BIGINT NOT NULL,
  nombre VARCHAR(255) NOT NULL,
  imagen VARCHAR(255),
  fecha_lanzamiento DATE NOT NULL,
  tipo_lamina VARCHAR(255) NOT NULL,
  is_active BOOLEAN DEFAULT TRUE,
  created_at DATETIME(6),
  updated_at DATETIME(6),
  PRIMARY KEY (id),
  CONSTRAINT uq_catalogo_album_nombre UNIQUE (album_id, nombre),
  CONSTRAINT fk_catalogo_album
    FOREIGN KEY (album_id) REFERENCES album(id)
);</pre>
                        <button class="btn-copy" style="top:38px" onclick="copyCode('sql-catalogo',this)"><i class="bi bi-copy me-1"></i>Copiar</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="reveal mt-4 mb-3">
            <h5 class="fw-bold mb-3" style="font-size:.95rem;"><i class="bi bi-shield-check me-2 text-primary-em"></i>Reglas de persistencia</h5>
        </div>

        <div class="row g-3 reveal">
            <div class="col-12 col-md-4">
                <div class="card-base h-100">
                    <div class="rule-title"><span class="ftag soft me-2">SD</span>Soft delete</div>
                    <p class="rule-copy">Los registros se marcan con <code>is_active=false</code>; no se eliminan f?sicamente.</p>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="card-base h-100">
                    <div class="rule-title"><span class="ftag audit me-2">AU</span>Auditor?a JPA</div>
                    <p class="rule-copy"><code>created_at</code> y <code>updated_at</code> se completan autom?ticamente con <code>@CreatedDate</code> y <code>@LastModifiedDate</code>.</p>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="card-base h-100">
                    <div class="rule-title"><span class="ftag me-2">UQ</span>Cat?logo ?nico por ?lbum</div>
                    <p class="rule-copy">La BD asegura unicidad con <code>(album_id, nombre)</code> en <code>lamina_catalogo</code>.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SEC: ESTRUCTURA DE LA APLICACIÓN -->
<div class="page-section" id="estructura-app">
    <div class="container">
        <div class="reveal">
            <div class="section-label"><i class="bi bi-diagram-2-fill"></i>Estructura de la aplicación</div>
            <h2 class="section-title">Cómo está organizada la app</h2>
            <p class="section-sub">Resumen integrado del HTML de estructura de aplicación, adaptado al formato one single page del <code>index</code>.</p>
        </div>

        <div class="row g-3 mb-3 reveal">
            <div class="col-12 col-lg-6">
                <div class="card-base h-100">
                    <div class="card-icon"><i class="bi bi-folder2-open"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Directorio de skills</h5>
                    <p style="font-size:.875rem;color:var(--text-muted);margin-bottom:10px;">Las habilidades del proyecto viven en <code>.agents/skills/</code> y cada una define rol, reglas y formato de salida en su <code>SKILL.md</code>.</p>
                    <ul class="feature-list">
                        <li><i class="bi bi-check2-circle"></i><span><strong>spring-boot-engineer:</strong> diseño backend avanzado y arquitectura en capas.</span></li>
                        <li><i class="bi bi-check2-circle"></i><span><strong>java-spring-boot:</strong> implementación REST, seguridad, validación y operaciones.</span></li>
                        <li><i class="bi bi-check2-circle"></i><span><strong>frontend-design:</strong> interfaz visual y consistencia UX/UI.</span></li>
                    </ul>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="card-base h-100">
                    <div class="card-icon"><i class="bi bi-diagram-3"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Flujo de trabajo de agente</h5>
                    <ul class="feature-list">
                        <li><span class="step-num">1</span><span><strong>Reconocer necesidad:</strong> detectar si la tarea requiere skill especializado.</span></li>
                        <li><span class="step-num">2</span><span><strong>Aplicar restricciones:</strong> respetar MUST DO / MUST NOT DO del skill.</span></li>
                        <li><span class="step-num">3</span><span><strong>Implementar con patrón:</strong> usar plantilla y convenciones del proyecto.</span></li>
                        <li><span class="step-num">4</span><span><strong>Persistir contexto:</strong> registrar decisiones y aprendizajes en memoria.</span></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row g-3 reveal">
            <div class="col-12 col-lg-7">
                <div class="card-base h-100">
                    <div class="rule-title mb-2"><span class="ftag me-2">ÁRBOL</span>Estructura resumida</div>
                    <div class="code-wrap mt-0">
                        <div class="code-header">
                            <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                            <span class="code-file">project-structure</span>
                        </div>
                        <pre id="pre-estructura-app">.agents/
└── skills/
    ├── spring-boot-engineer/
    │   ├── SKILL.md
    │   └── references/
    ├── java-spring-boot/
    │   ├── SKILL.md
    │   ├── scripts/
    │   └── assets/
    └── frontend-design/
        └── SKILL.md</pre>
                        <button class="btn-copy" style="top:38px" onclick="copyCode('pre-estructura-app',this)"><i class="bi bi-copy me-1"></i>Copiar</button>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-5">
                <div class="card-base h-100">
                    <div class="card-icon"><i class="bi bi-journal-check"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Documentación complementaria</h5>
                    <ul class="feature-list">
                        <li><i class="bi bi-file-earmark-text"></i><span><code>.github/templates/mcp_engram_mem_session_summary_TEMPLATE.md</code></span></li>
                        <li><i class="bi bi-file-earmark-text"></i><span><code>.github/templates/mcp_engram_mem_save_TEMPLATE.md</code></span></li>
                    </ul>
                    <p class="mb-0 mt-2" style="font-size:.86rem;color:var(--text-muted);">Si se requiere más detalle, se puede conservar la vista standalone como referencia histórica sin romper la experiencia single-page.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SEC: SDD -->
<div class="page-section" id="sdd">
    <div class="container">
        <div class="reveal">
            <div class="section-label"><i class="bi bi-diagram-3-fill"></i>Spec-Driven Development</div>
            <h2 class="section-title">Cómo funciona SDD en este proyecto</h2>
            <p class="section-sub">Flujo de trabajo para cambios pequeños, trazables y verificables en <code>openspec/</code>.</p>
        </div>

        <div class="row g-3 mb-3 reveal">
            <div class="col-12 col-lg-7">
                <div class="card-base h-100">
                    <div class="card-icon"><i class="bi bi-lightbulb"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.96rem;">¿Qué es SDD?</h5>
                    <p style="font-size:.88rem;color:var(--text-muted);margin-bottom:12px;">Define primero qué se cambia y cómo se valida, y después se implementa.</p>
                    <ul class="feature-list">
                        <li><i class="bi bi-check-circle-fill"></i><span>Evita cambios improvisados sin contexto.</span></li>
                        <li><i class="bi bi-check-circle-fill"></i><span>Mejora la trazabilidad de decisiones técnicas.</span></li>
                        <li><i class="bi bi-check-circle-fill"></i><span>Facilita retomar trabajo entre sesiones.</span></li>
                    </ul>
                </div>
            </div>
            <div class="col-12 col-lg-5">
                <div class="card-base h-100">
                    <div class="card-icon"><i class="bi bi-terminal"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.96rem;">Comando inicial</h5>
                    <p style="font-size:.88rem;color:var(--text-muted);margin-bottom:10px;">Inicia un cambio con un nombre claro:</p>
                    <div class="code-wrap mt-0">
                        <div class="code-header">
                            <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                            <span class="code-file">terminal</span>
                        </div>
                        <pre id="code-sdd-new">sdd:new agregar-explicacion-sdd-html</pre>
                    </div>
                </div>
            </div>
        </div>

        <div class="row g-3 reveal">
            <div class="col-12 col-lg-6">
                <div class="card-base h-100">
                    <div class="rule-title mb-3"><span class="ftag me-2">FLUJO</span>Pasos recomendados</div>
                    <ul class="feature-list">
                        <li><span class="step-num">1</span><span><strong>Explore:</strong> entender alcance y riesgos.</span></li>
                        <li><span class="step-num">2</span><span><strong>Propose:</strong> redactar <code>proposal.md</code>.</span></li>
                        <li><span class="step-num">3</span><span><strong>Spec:</strong> definir requisitos y escenarios.</span></li>
                        <li><span class="step-num">4</span><span><strong>Design:</strong> documentar decisiones y tradeoffs.</span></li>
                        <li><span class="step-num">5</span><span><strong>Tasks:</strong> dividir en tareas concretas.</span></li>
                        <li><span class="step-num">6</span><span><strong>Apply / Verify / Archive:</strong> implementar, validar y cerrar.</span></li>
                    </ul>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="card-base h-100">
                    <div class="rule-title mb-2"><span class="ftag audit me-2">ESTRUCTURA</span>Árbol base</div>
                    <div class="code-wrap mt-0">
                        <div class="code-header">
                            <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                            <span class="code-file">openspec</span>
                        </div>
                        <pre id="code-sdd-tree">openspec/
├── config.yaml
├── specs/
└── changes/
    ├── archive/
    └── &lt;cambio&gt;/
        ├── proposal.md
        ├── design.md
        ├── tasks.md
        └── specs/</pre>
                    </div>
                    <p class="mt-3 mb-0" style="font-size:.85rem;color:var(--text-muted);">
                        <i class="bi bi-info-circle me-1"></i>
                        Consejo: mantén cada cambio pequeño y con un objetivo claro.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SEC: VISTAS INTEGRADAS -->
<div class="page-section" id="vistas">
    <div class="container">
        <div class="reveal">
            <div class="section-label"><i class="bi bi-window-stack"></i>Vistas integradas</div>
            <h2 class="section-title">HTML revisados e incorporados al single-page</h2>
            <p class="section-sub">Resumen de vistas auxiliares del repositorio integradas como contenido de referencia dentro del <code>index</code>.</p>
        </div>
        <div class="row g-3 reveal">
            <div class="col-12 col-md-6 col-xl-4">
                <div class="card-base h-100 d-flex flex-column">
                    <div class="card-icon"><i class="bi bi-music-note-beamed"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Canciones</h5>
                    <p class="flex-grow-1" style="font-size:.875rem;color:var(--text-muted);">Módulo UI para gestión de canciones con filtros, tabla y acciones CRUD.</p>
                    <ul class="feature-list mb-3">
                        <li><i class="bi bi-check2"></i><span>Listado + búsqueda rápida</span></li>
                        <li><i class="bi bi-check2"></i><span>Crear, editar y eliminar</span></li>
                    </ul>
                    <a class="btn btn-ghost btn-sm mt-auto" href="/swagger-ui.html"><i class="bi bi-arrow-up-right-square me-1"></i>Probar endpoints</a>
                </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4">
                <div class="card-base h-100 d-flex flex-column">
                    <div class="card-icon"><i class="bi bi-bag-check"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Pedidos</h5>
                    <p class="flex-grow-1" style="font-size:.875rem;color:var(--text-muted);">Panel frontend con formulario validado y listado de pedidos existentes.</p>
                    <ul class="feature-list mb-3">
                        <li><i class="bi bi-check2"></i><span>Alta con validaciones</span></li>
                        <li><i class="bi bi-check2"></i><span>Visualización del histórico</span></li>
                    </ul>
                    <span class="ftag">Assets: <code>pedidos.css</code> + <code>pedidos.js</code></span>
                </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4">
                <div class="card-base h-100">
                    <div class="card-icon"><i class="bi bi-box-seam"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Docker (cómo funciona)</h5>
                    <p style="font-size:.875rem;color:var(--text-muted);">Guía operativa del flujo: build, tag, push y deploy en Cloud Run.</p>
                    <ul class="feature-list">
                        <li><i class="bi bi-check2"></i><span>Artifact Registry</span></li>
                        <li><i class="bi bi-check2"></i><span>Comandos <code>gcloud</code> clave</span></li>
                    </ul>
                </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4">
                <div class="card-base h-100">
                    <div class="card-icon"><i class="bi bi-journal-code"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Agentes</h5>
                    <p style="font-size:.875rem;color:var(--text-muted);">Mapa de skills del proyecto y flujo de uso de agentes especializados.</p>
                    <ul class="feature-list">
                        <li><i class="bi bi-check2"></i><span><code>.agents/skills/*</code></span></li>
                        <li><i class="bi bi-check2"></i><span>Roles + referencias por dominio</span></li>
                    </ul>
                </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4">
                <div class="card-base h-100">
                    <div class="card-icon"><i class="bi bi-memory"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Engram</h5>
                    <p style="font-size:.875rem;color:var(--text-muted);">Protocolo de memoria persistente para guardar decisiones, bugs y descubrimientos.</p>
                    <ul class="feature-list">
                        <li><i class="bi bi-check2"></i><span><code>mem_save</code> para hitos</span></li>
                        <li><i class="bi bi-check2"></i><span><code>mem_session_summary</code> al cerrar</span></li>
                    </ul>
                </div>
            </div>
            <div class="col-12 col-md-6 col-xl-4">
                <div class="card-base h-100">
                    <div class="card-icon"><i class="bi bi-palette2"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Frontend UI/UX</h5>
                    <p style="font-size:.875rem;color:var(--text-muted);">Guía de revisión y mejora visual para componentes y flujos de interfaz.</p>
                    <ul class="feature-list">
                        <li><i class="bi bi-check2"></i><span>Priorización por criticidad</span></li>
                        <li><i class="bi bi-check2"></i><span>Accesibilidad y consistencia</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SEC: RECURSOS -->
<div class="page-section" id="recursos">
    <div class="container">
        <div class="reveal">
            <div class="section-label"><i class="bi bi-link-45deg"></i>Recursos</div>
            <h2 class="section-title">Enlaces útiles</h2>
            <p class="section-sub">Accesos directos a las herramientas del proyecto.</p>
        </div>
        <div class="row g-3 reveal">
            <div class="col-12 col-md-4">
                <div class="card-base h-100 d-flex flex-column">
                    <div class="card-icon"><i class="bi bi-play-circle"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Swagger UI</h5>
                    <p class="flex-grow-1" style="font-size:.875rem;color:var(--text-muted);">Interface interactiva para probar todos los endpoints con formularios generados automáticamente.</p>
                    <a class="btn btn-primary-solid btn-sm mt-3" href="/swagger-ui.html"><i class="bi bi-arrow-up-right-square me-1"></i>Abrir</a>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="card-base h-100 d-flex flex-column">
                    <div class="card-icon"><i class="bi bi-file-code"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">OpenAPI JSON</h5>
                    <p class="flex-grow-1" style="font-size:.875rem;color:var(--text-muted);">Especificación completa en formato machine-readable para SDKs y clientes.</p>
                    <a class="btn btn-ghost btn-sm mt-3" href="/v3/api-docs"><i class="bi bi-braces me-1"></i>Descargar</a>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="card-base h-100 d-flex flex-column">
                    <div class="card-icon"><i class="bi bi-heart-pulse"></i></div>
                    <h5 class="fw-bold mb-2" style="font-size:.95rem;">Health &amp; Actuator</h5>
                    <p class="flex-grow-1" style="font-size:.875rem;color:var(--text-muted);">Monitorea el estado del servicio y métricas de Spring Actuator en tiempo real.</p>
                    <a class="btn btn-ghost btn-sm mt-3" href="/actuator/health"><i class="bi bi-activity me-1"></i>Ver health</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- FOOTER -->
<footer class="site-footer">
    <div class="container">
        <div class="footer-inner">
            <div class="footer-brand">
                <span class="brand-mark" style="width:22px;height:22px;font-size:.72rem;"><i class="bi bi-collection-fill"></i></span>
                Álbumes &amp; Láminas API
            </div>
            <div class="footer-links">
                <a href="/swagger-ui.html"><i class="bi bi-arrow-up-right-square me-1"></i>Swagger</a>
                <a href="/v3/api-docs"><i class="bi bi-braces me-1"></i>OpenAPI</a>
                <a href="/actuator/health"><i class="bi bi-activity me-1"></i>Health</a>
                <a href="/h2-console"><i class="bi bi-database me-1"></i>H2 Console</a>
                <a href="#estructura-app"><i class="bi bi-diagram-2 me-1"></i>Estructura app</a>
                <a href="#vistas"><i class="bi bi-window-stack me-1"></i>Vistas</a>
                <a href="#sdd"><i class="bi bi-diagram-3 me-1"></i>SDD</a>
            </div>
            <div class="footer-copy">Spring Boot 3.5.9 &middot; Java 21 &middot; 2026</div>
        </div>
    </div>
</footer>

<!-- BACK TO TOP -->
<button id="backTop" title="Volver arriba" onclick="window.scrollTo({top:0,behavior:'smooth'})">
    <i class="bi bi-arrow-up"></i>
</button>

<!-- TOAST -->
<div class="toast-container position-fixed bottom-0 start-50 translate-middle-x pb-3">
    <div id="copyToast" class="toast align-items-center text-bg-success border-0" role="alert" aria-live="polite">
        <div class="d-flex">
            <div class="toast-body fw-semibold"><i class="bi bi-check2 me-2"></i>Copiado al portapapeles</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script>
(function(){
    // ── Scroll progress ──────────────────────────────────────────────────────
    var prog = document.getElementById('scroll-progress');
    window.addEventListener('scroll', function(){
        var tot = document.documentElement.scrollHeight - window.innerHeight;
        prog.style.width = (tot > 0 ? (window.scrollY / tot * 100) : 0) + '%';
    }, {passive:true});

    // ── Back to top ──────────────────────────────────────────────────────────
    var btt = document.getElementById('backTop');
    window.addEventListener('scroll', function(){ btt.classList.toggle('show', window.scrollY > 300); }, {passive:true});

    // ── Active nav ───────────────────────────────────────────────────────────
    var navLinks = document.querySelectorAll('#navbarDesktop .nav-link');
    var secs = ['overview','setup','datos','estructura-app','vistas','sdd','recursos'].map(function(id){ return document.getElementById(id); }).filter(Boolean);
    new IntersectionObserver(function(entries){
        entries.forEach(function(e){
            if(e.isIntersecting){
                navLinks.forEach(function(l){ l.classList.remove('active'); });
                var m = document.querySelector('#navbarDesktop a[href="#'+e.target.id+'"]');
                if(m) m.classList.add('active');
            }
        });
    }, { rootMargin: '-50% 0px -45% 0px' }).observe
    && secs.forEach(function(s){ new IntersectionObserver(function(entries){ entries.forEach(function(e){ if(e.isIntersecting){ navLinks.forEach(function(l){ l.classList.remove('active'); }); var m = document.querySelector('#navbarDesktop a[href="#'+e.target.id+'"]'); if(m) m.classList.add('active'); } }); }, { rootMargin: '-50% 0px -45% 0px' }).observe(s); });

    // ── Scroll-reveal ────────────────────────────────────────────────────────
    var revIO = new IntersectionObserver(function(entries){
        entries.forEach(function(e){ if(e.isIntersecting){ e.target.classList.add('visible'); revIO.unobserve(e.target); } });
    }, { threshold: 0.1 });
    document.querySelectorAll('.reveal').forEach(function(el){ revIO.observe(el); });

    // ── Copy to clipboard ────────────────────────────────────────────────────
    var toast = new bootstrap.Toast(document.getElementById('copyToast'), { delay: 2000 });
    window.copyCode = function(id, btn){
        navigator.clipboard.writeText(document.getElementById(id).innerText).then(function(){
            btn.classList.add('copied');
            btn.innerHTML = '<i class="bi bi-check2 me-1"></i>Copiado';
            toast.show();
            setTimeout(function(){ btn.classList.remove('copied'); btn.innerHTML = '<i class="bi bi-copy me-1"></i>Copiar'; }, 2200);
        });
    };

    // ── Animated counters ────────────────────────────────────────────────────
    var counted = false;
    new IntersectionObserver(function(entries){
        if(entries[0].isIntersecting && !counted){
            counted = true;
            document.querySelectorAll('[data-count]').forEach(function(el){
                var t = +el.dataset.count, c = 0, step = Math.ceil(t/28);
                var tmr = setInterval(function(){ c = Math.min(c+step,t); el.textContent = c; if(c>=t) clearInterval(tmr); }, 45);
            });
        }
    }, { threshold: 0.5 }).observe(document.querySelector('.stats-bar') || document.body);

    // ── Theme toggle ─────────────────────────────────────────────────────────
    var html    = document.documentElement;
    var toggle  = document.getElementById('themeToggle');
    var saved   = localStorage.getItem('theme');
    var init    = saved || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    function applyTheme(t){ html.setAttribute('data-bs-theme', t); localStorage.setItem('theme', t); }
    applyTheme(init);
    toggle.addEventListener('click', function(){ applyTheme(html.getAttribute('data-bs-theme') === 'dark' ? 'light' : 'dark'); });

    // ── Health check ─────────────────────────────────────────────────────────
    var dot = document.getElementById('health-dot');
    var lbl = document.getElementById('health-label');
    fetch('/actuator/health').then(function(r){ return r.json(); }).then(function(j){
        var up = j && j.status === 'UP';
        dot.className = up ? 'up' : 'down';
        lbl.textContent = up ? 'Servicio UP' : 'Servicio DOWN';
    }).catch(function(){ dot.className = 'down'; lbl.textContent = 'Sin respuesta'; });

    // ── Smooth scroll ────────────────────────────────────────────────────────
    document.querySelectorAll('a[href^="#"]').forEach(function(a){
        a.addEventListener('click', function(e){
            var t = document.querySelector(a.getAttribute('href'));
            if(t){ e.preventDefault(); t.scrollIntoView({ behavior:'smooth', block:'start' }); }
        });
    });
})();
</script>
</body>
</html>

